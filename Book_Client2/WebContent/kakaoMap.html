<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Kakao 지도 시작하기</title>
</head>


<body>
<div id="map" style="width:400px;height:300px;"></div>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=dbd5ff3e29429c98c5698b96b1ed1ccf"></script>
<script>
/*
    let a = "";
    let b = "";
    function getLocation() {
        navigator.geolocation.getCurrentPosition(function(position) {
             a = position.coords.latitude
             b = position.coords.longitude
        })

    }
    getLocation();

    */

    function getLocation() {
        if (navigator.geolocation) { // GPS를 지원하면
            navigator.geolocation.getCurrentPosition(function(position) {
                alert(position.coords.latitude + ' ' + position.coords.longitude);
    let container = document.getElementById('map');
    let options = {
        // center: new kakao.maps.LatLng(36.3298522, 127.41475620000001),
        center: new kakao.maps.LatLng(position.coords.latitude , position.coords.longitude),
        // center: new kakao.maps.LatLng(parseInt(a), parseInt(b)),
        level: 3
    };
    
        var map = new kakao.maps.Map(container, options);
        
     // 마커를 표시할 위치와 title 객체 배열입니다
        var positions = [
        	{
        		libraryName: "용운도서관",
        		시도명: "대전광역시",
        		시군구명: "동구",
        		도서관유형: "공공도서관",
        		휴관일: "월요일, 관공서의 공휴일",
        		평일운영시작시각: "09:00",
        		평일운영종료시각: "22:00",
        		토요일운영시작시각: "09:00",
        		토요일운영종료시각: "22:00",
        		공휴일운영시작시각: "00:00",
        		공휴일운영종료시각: "00:00",
        		열람좌석수: "350",
        		materialNumBook: "110675",
        		materialNumSerialPublications: "26",
        		materialNumNon_book: "5323",
        		NumberOfLoansAvailable: "5",
        		LoanDays: "14",
        		소재지도로명주소: "대전광역시 동구 새울로 68번길 23-23 (용운동)",
        		운영기관명: "대전광역시 동구청",
        		도서관전화번호: "042-259-7021",
        		부지면적: "2134",
        		건물면적: "1937",
        		홈페이지주소: "http://lib.donggu.go.kr/html/library/yongunlib/",
        		Latitude: "36.3257031179",
        		longitude: "127.4638509481",
        		latlng: new kakao.maps.LatLng(36.3257031179, 127.4638509481),
        		데이터기준일자: "2019-09-17",
        		제공기관코드: "3640000",
        		제공기관명: "대전광역시 동구"
        		},
        		{
        		libraryName: "가오도서관",
        		시도명: "대전광역시",
        		시군구명: "동구",
        		도서관유형: "공공도서관",
        		휴관일: "월요일, 관공서의 공휴일",
        		평일운영시작시각: "09:00",
        		평일운영종료시각: "22:00",
        		토요일운영시작시각: "09:00",
        		토요일운영종료시각: "22:00",
        		공휴일운영시작시각: "00:00",
        		공휴일운영종료시각: "00:00",
        		열람좌석수: "300",
        		materialNumBook: "103790",
        		materialNumSerialPublications: "37",
        		materialNumNon_book: "3484",
        		NumberOfLoansAvailable: "5",
        		LoanDays: "14",
        		소재지도로명주소: "대전광역시 동구 동구청로 147 (가오동 동구청)",
        		운영기관명: "대전광역시 동구청",
        		도서관전화번호: "042-259-7051",
        		부지면적: "22767",
        		건물면적: "2630",
        		홈페이지주소: "http://lib.donggu.go.kr/html/library/gaolib/",
        		Latitude: "36.3120359626",
        		longitude: "127.4549155319",
        		latlng: new kakao.maps.LatLng(36.3120359626, 127.4549155319),
        		데이터기준일자: "2019-09-17",
        		제공기관코드: "3640000",
        		제공기관명: "대전광역시 동구"
        		}

        ];

        // 마커 이미지의 이미지 주소입니다
        var imageSrc = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png";

        for (var i = 0; i < positions.length; i ++) {

            // 마커 이미지의 이미지 크기 입니다
            var imageSize = new kakao.maps.Size(24, 35);

            // 마커 이미지를 생성합니다
            var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);

            // 마커를 생성합니다
            var marker = new kakao.maps.Marker({
                map: map, // 마커를 표시할 지도
                position: positions[i].latlng, // 마커를 표시할 위치
                title : positions[i].title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀이 표시됩니다
                image : markerImage // 마커 이미지
            });
        }// for
    
        
        
        
        
        
        
        
        
        
            }, function(error) {
                console.error(error);
            }, {
                enableHighAccuracy: false,
                maximumAge: 0,
                timeout: Infinity
            });
        } else {
            alert('GPS를 지원하지 않습니다');
        }
    }

    getLocation();
</script>

</body>
</html>